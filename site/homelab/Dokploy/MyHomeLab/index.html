
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Microsoft Cloud DevOps Engineer sharing home lab projects, security implementations, and development best practices">
      
      
        <meta name="author" content="Rov">
      
      
        <link rel="canonical" href="https://rovblog.cooked.beer/homelab/Dokploy/MyHomeLab/">
      
      
        <link rel="prev" href="../Plan/">
      
      
        <link rel="next" href="../../../Tailscale/Homelab%20Config/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>My Home Lab Guide - Rov's Tech Blog</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      
  
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
  
  <style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M1%207.775V2.75C1%201.784%201.784%201%202.75%201h5.025c.464%200%20.91.184%201.238.513l6.25%206.25a1.75%201.75%200%200%201%200%202.474l-5.026%205.026a1.75%201.75%200%200%201-2.474%200l-6.25-6.25A1.75%201.75%200%200%201%201%207.775m1.5%200c0%20.066.026.13.073.177l6.25%206.25a.25.25%200%200%200%20.354%200l5.025-5.025a.25.25%200%200%200%200-.354l-6.25-6.25a.25.25%200%200%200-.177-.073H2.75a.25.25%200%200%200-.25.25ZM6%205a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E');--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2.5%201.75v11.5c0%20.138.112.25.25.25h3.17a.75.75%200%200%201%200%201.5H2.75A1.75%201.75%200%200%201%201%2013.25V1.75C1%20.784%201.784%200%202.75%200h8.5C12.216%200%2013%20.784%2013%201.75v7.736a.75.75%200%200%201-1.5%200V1.75a.25.25%200%200%200-.25-.25h-8.5a.25.25%200%200%200-.25.25m13.274%209.537zl-4.557%204.45a.75.75%200%200%201-1.055-.008l-1.943-1.95a.75.75%200%200%201%201.062-1.058l1.419%201.425%204.026-3.932a.75.75%200%201%201%201.048%201.074M4.75%204h4.5a.75.75%200%200%201%200%201.5h-4.5a.75.75%200%200%201%200-1.5M4%207.75A.75.75%200%200%201%204.75%207h2a.75.75%200%200%201%200%201.5h-2A.75.75%200%200%201%204%207.75%22/%3E%3C/svg%3E');--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M0%208a8%208%200%201%201%2016%200A8%208%200%200%201%200%208m8-6.5a6.5%206.5%200%201%200%200%2013%206.5%206.5%200%200%200%200-13M6.5%207.75A.75.75%200%200%201%207.25%207h1a.75.75%200%200%201%20.75.75v2.75h.25a.75.75%200%200%201%200%201.5h-2a.75.75%200%200%201%200-1.5h.25v-2h-.25a.75.75%200%200%201-.75-.75M8%206a1%201%200%201%201%200-2%201%201%200%200%201%200%202%22/%3E%3C/svg%3E');--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M3.499.75a.75.75%200%200%201%201.5%200v.996C5.9%202.903%206.793%203.65%207.662%204.376l.24.202c-.036-.694.055-1.422.426-2.163C9.1.873%2010.794-.045%2012.622.26%2014.408.558%2016%201.94%2016%204.25c0%201.278-.954%202.575-2.44%202.734l.146.508.065.22c.203.701.412%201.455.476%202.226.142%201.707-.4%203.03-1.487%203.898C11.714%2014.671%2010.27%2015%208.75%2015h-6a.75.75%200%200%201%200-1.5h1.376a4.5%204.5%200%200%201-.563-1.191%203.84%203.84%200%200%201-.05-2.063%204.65%204.65%200%200%201-2.025-.293.75.75%200%200%201%20.525-1.406c1.357.507%202.376-.006%202.698-.318l.009-.01a.747.747%200%200%201%201.06%200%20.75.75%200%200%201-.012%201.074c-.912.92-.992%201.835-.768%202.586.221.74.745%201.337%201.196%201.621H8.75c1.343%200%202.398-.296%203.074-.836.635-.507%201.036-1.31.928-2.602-.05-.603-.216-1.224-.422-1.93l-.064-.221c-.12-.407-.246-.84-.353-1.29a2.4%202.4%200%200%201-.507-.441%203.1%203.1%200%200%201-.633-1.248.75.75%200%200%201%201.455-.364c.046.185.144.436.31.627.146.168.353.305.712.305.738%200%201.25-.615%201.25-1.25%200-1.47-.95-2.315-2.123-2.51-1.172-.196-2.227.387-2.706%201.345-.46.92-.27%201.774.019%203.062l.042.19.01.05c.348.443.666.949.94%201.553a.75.75%200%201%201-1.365.62c-.553-1.217-1.32-1.94-2.3-2.768L6.7%205.527c-.814-.68-1.75-1.462-2.692-2.619a3.7%203.7%200%200%200-1.023.88c-.406.495-.663%201.036-.722%201.508.116.122.306.21.591.239.388.038.797-.06%201.032-.19a.75.75%200%200%201%20.728%201.31c-.515.287-1.23.439-1.906.373-.682-.067-1.473-.38-1.879-1.193L.75%205.677V5.5c0-.984.48-1.94%201.077-2.664.46-.559%201.05-1.055%201.673-1.353z%22/%3E%3C/svg%3E');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M13.78%204.22a.75.75%200%200%201%200%201.06l-7.25%207.25a.75.75%200%200%201-1.06%200L2.22%209.28a.75.75%200%200%201%20.018-1.042.75.75%200%200%201%201.042-.018L6%2010.94l6.72-6.72a.75.75%200%200%201%201.06%200%22/%3E%3C/svg%3E');--md-admonition-icon--question:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M0%208a8%208%200%201%201%2016%200A8%208%200%200%201%200%208m8-6.5a6.5%206.5%200%201%200%200%2013%206.5%206.5%200%200%200%200-13M6.92%206.085h.001a.749.749%200%201%201-1.342-.67c.169-.339.436-.701.849-.977C6.845%204.16%207.369%204%208%204a2.76%202.76%200%200%201%201.637.525c.503.377.863.965.863%201.725%200%20.448-.115.83-.329%201.15-.205.307-.47.513-.692.662-.109.072-.22.138-.313.195l-.006.004a6%206%200%200%200-.26.16%201%201%200%200%200-.276.245.75.75%200%200%201-1.248-.832c.184-.264.42-.489.692-.661q.154-.1.313-.195l.007-.004c.1-.061.182-.11.258-.161a1%201%200%200%200%20.277-.245C8.96%206.514%209%206.427%209%206.25a.61.61%200%200%200-.262-.525A1.27%201.27%200%200%200%208%205.5c-.369%200-.595.09-.74.187a1%201%200%200%200-.34.398M9%2011a1%201%200%201%201-2%200%201%201%200%200%201%202%200%22/%3E%3C/svg%3E');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M6.457%201.047c.659-1.234%202.427-1.234%203.086%200l6.082%2011.378A1.75%201.75%200%200%201%2014.082%2015H1.918a1.75%201.75%200%200%201-1.543-2.575Zm1.763.707a.25.25%200%200%200-.44%200L1.698%2013.132a.25.25%200%200%200%20.22.368h12.164a.25.25%200%200%200%20.22-.368Zm.53%203.996v2.5a.75.75%200%200%201-1.5%200v-2.5a.75.75%200%200%201%201.5%200M9%2011a1%201%200%201%201-2%200%201%201%200%200%201%202%200%22/%3E%3C/svg%3E');--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2.344%202.343za8%208%200%200%201%2011.314%2011.314A8.002%208.002%200%200%201%20.234%2010.089a8%208%200%200%201%202.11-7.746m1.06%2010.253a6.5%206.5%200%201%200%209.108-9.275%206.5%206.5%200%200%200-9.108%209.275M6.03%204.97%208%206.94l1.97-1.97a.749.749%200%200%201%201.275.326.75.75%200%200%201-.215.734L9.06%208l1.97%201.97a.749.749%200%200%201-.326%201.275.75.75%200%200%201-.734-.215L8%209.06l-1.97%201.97a.749.749%200%200%201-1.275-.326.75.75%200%200%201%20.215-.734L6.94%208%204.97%206.03a.75.75%200%200%201%20.018-1.042.75.75%200%200%201%201.042-.018%22/%3E%3C/svg%3E');--md-admonition-icon--danger:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M9.504.43a1.516%201.516%200%200%201%202.437%201.713L10.415%205.5h2.123c1.57%200%202.346%201.909%201.22%203.004l-7.34%207.142a1.25%201.25%200%200%201-.871.354h-.302a1.25%201.25%200%200%201-1.157-1.723L5.633%2010.5H3.462c-1.57%200-2.346-1.909-1.22-3.004zm1.047%201.074L3.286%208.571A.25.25%200%200%200%203.462%209H6.75a.75.75%200%200%201%20.694%201.034l-1.713%204.188%206.982-6.793A.25.25%200%200%200%2012.538%207H9.25a.75.75%200%200%201-.683-1.06l2.008-4.418.003-.006-.004-.009-.006-.006-.008-.001q-.005%200-.009.004%22/%3E%3C/svg%3E');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M4.72.22a.75.75%200%200%201%201.06%200l1%20.999a3.5%203.5%200%200%201%202.441%200l.999-1a.748.748%200%200%201%201.265.332.75.75%200%200%201-.205.729l-.775.776c.616.63.995%201.493.995%202.444v.327q0%20.15-.025.292c.408.14.764.392%201.029.722l1.968-.787a.75.75%200%200%201%20.556%201.392L13%207.258V9h2.25a.75.75%200%200%201%200%201.5H13v.5q-.002.615-.141%201.186l2.17.868a.75.75%200%200%201-.557%201.392l-2.184-.873A5%205%200%200%201%208%2016a5%205%200%200%201-4.288-2.427l-2.183.873a.75.75%200%200%201-.558-1.392l2.17-.868A5%205%200%200%201%203%2011v-.5H.75a.75.75%200%200%201%200-1.5H3V7.258L.971%206.446a.75.75%200%200%201%20.558-1.392l1.967.787c.265-.33.62-.583%201.03-.722a1.7%201.7%200%200%201-.026-.292V4.5c0-.951.38-1.814.995-2.444L4.72%201.28a.75.75%200%200%201%200-1.06m.53%206.28a.75.75%200%200%200-.75.75V11a3.5%203.5%200%201%200%207%200V7.25a.75.75%200%200%200-.75-.75ZM6.173%205h3.654A.17.17%200%200%200%2010%204.827V4.5a2%202%200%201%200-4%200v.327c0%20.096.077.173.173.173%22/%3E%3C/svg%3E');--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5%205.782V2.5h-.25a.75.75%200%200%201%200-1.5h6.5a.75.75%200%200%201%200%201.5H11v3.282l3.666%205.76C15.619%2013.04%2014.543%2015%2012.767%2015H3.233c-1.776%200-2.852-1.96-1.899-3.458Zm-2.4%206.565a.75.75%200%200%200%20.633%201.153h9.534a.75.75%200%200%200%20.633-1.153L12.225%2010.5h-8.45ZM9.5%202.5h-3V6c0%20.143-.04.283-.117.403L4.73%209h6.54L9.617%206.403A.75.75%200%200%201%209.5%206Z%22/%3E%3C/svg%3E');--md-admonition-icon--quote:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M1.75%202.5h10.5a.75.75%200%200%201%200%201.5H1.75a.75.75%200%200%201%200-1.5m4%205h8.5a.75.75%200%200%201%200%201.5h-8.5a.75.75%200%200%201%200-1.5m0%205h8.5a.75.75%200%200%201%200%201.5h-8.5a.75.75%200%200%201%200-1.5M2.5%207.75v6a.75.75%200%200%201-1.5%200v-6a.75.75%200%200%201%201.5%200%22/%3E%3C/svg%3E');}</style>



    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Poppins";--md-code-font:"JetBrains Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/custom.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="pink">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#my-home-lab-rebuilt-a-practical-battle-tested-guide" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Rov&#39;s Tech Blog" class="md-header__button md-logo" aria-label="Rov's Tech Blog" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M9.4 86.6c-12.5-12.5-12.5-32.7 0-45.2s32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L178.7 256zM256 416h288c17.7 0 32 14.3 32 32s-14.3 32-32 32H256c-17.7 0-32-14.3-32-32s14.3-32 32-32"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Rov's Tech Blog
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              My Home Lab Guide
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="pink"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="pink"  aria-hidden="true"  type="radio" name="__palette" id="__palette_1">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/RovxBot/rovblog" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    RovxBot/rovblog
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../K8s/Homelab%20Night%201/" class="md-tabs__link">
          
  
  
  Homelab

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../Tailscale/Homelab%20Config/" class="md-tabs__link">
          
  
  
  Networking

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../WDAC/GettingStarted/" class="md-tabs__link">
          
  
  
  Security & Identity

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../Version%20Control/Intro/" class="md-tabs__link">
          
  
  
  Development & DevOps

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../Game/HigherPower/" class="md-tabs__link">
          
  
  
  Creative Writing

        </a>
      </li>
    
  

    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Rov&#39;s Tech Blog" class="md-nav__button md-logo" aria-label="Rov's Tech Blog" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M9.4 86.6c-12.5-12.5-12.5-32.7 0-45.2s32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L178.7 256zM256 416h288c17.7 0 32 14.3 32 32s-14.3 32-32 32H256c-17.7 0-32-14.3-32-32s14.3-32 32-32"/></svg>

    </a>
    Rov's Tech Blog
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/RovxBot/rovblog" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    RovxBot/rovblog
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Homelab
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Homelab
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Kubernetes Setup
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            Kubernetes Setup
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../K8s/Homelab%20Night%201/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Night 1 - Development Environment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../K8s/Homelab%20Night%202/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Night 2 - Hardware Setup
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Docker Swarm with Dokploy
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Docker Swarm with Dokploy
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Plan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deployment Plan
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    My Home Lab Guide
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    My Home Lab Guide
    
  </span>
  

      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#topology-at-a-glance" class="md-nav__link">
    <span class="md-ellipsis">
      Topology at a Glance
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture-overview" class="md-nav__link">
    <span class="md-ellipsis">
      Architecture Overview
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Architecture Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#why-this-setup-works" class="md-nav__link">
    <span class="md-ellipsis">
      Why This Setup Works
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hardware-foundation" class="md-nav__link">
    <span class="md-ellipsis">
      Hardware Foundation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#core-design-patterns-that-pay-off" class="md-nav__link">
    <span class="md-ellipsis">
      Core Design Patterns That Pay Off
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Core Design Patterns That Pay Off">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-nfs-done-right-match-the-server-and-the-path" class="md-nav__link">
    <span class="md-ellipsis">
      1) NFS Done Right: Match the Server and the Path
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1) NFS Done Right: Match the Server and the Path">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#quick-sanity-checks-i-use" class="md-nav__link">
    <span class="md-ellipsis">
      Quick Sanity Checks I Use
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-edge-sidecar-to-bridge-host-net-apps-to-traefik" class="md-nav__link">
    <span class="md-ellipsis">
      2) “Edge sidecar” to bridge host-net apps to Traefik
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2) “Edge sidecar” to bridge host-net apps to Traefik">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#3-keep-hot-lock-sensitive-dbs-local-the-jellyfin-fix" class="md-nav__link">
    <span class="md-ellipsis">
      3) Keep Hot, Lock-Sensitive DBs Local (The Jellyfin Fix)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#storage-architecture-deep-dive" class="md-nav__link">
    <span class="md-ellipsis">
      Storage Architecture Deep Dive
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Storage Architecture Deep Dive">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#understanding-nfs-in-a-home-lab-context" class="md-nav__link">
    <span class="md-ellipsis">
      Understanding NFS in a Home Lab Context
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-applications" class="md-nav__link">
    <span class="md-ellipsis">
      The Applications
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The Applications">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#jellyfin-media-server" class="md-nav__link">
    <span class="md-ellipsis">
      Jellyfin (Media Server)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#radarr-sonarr-prowlarr-sabnzbd-jellyseerr" class="md-nav__link">
    <span class="md-ellipsis">
      Radarr, Sonarr, Prowlarr, SABnzbd, Jellyseerr
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vaultwarden-password-manager" class="md-nav__link">
    <span class="md-ellipsis">
      Vaultwarden (Password Manager)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#immich-self-hosted-photos" class="md-nav__link">
    <span class="md-ellipsis">
      Immich (self-hosted photos)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backups-with-duplicacy-cli-swarm-cron" class="md-nav__link">
    <span class="md-ellipsis">
      Backups with Duplicacy CLI + Swarm Cron
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-security-deep-dive" class="md-nav__link">
    <span class="md-ellipsis">
      Network Security Deep Dive
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#authentication-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      Authentication Strategy
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dokploy-swarm-the-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      Dokploy + Swarm: The Workflow
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#security-and-hygiene" class="md-nav__link">
    <span class="md-ellipsis">
      Security and Hygiene
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lessons-learned-so-you-dont-have-to" class="md-nav__link">
    <span class="md-ellipsis">
      Lessons Learned (so you don’t have to)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-topics-and-future-improvements" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Topics and Future Improvements
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced Topics and Future Improvements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#monitoring-and-observability" class="md-nav__link">
    <span class="md-ellipsis">
      Monitoring and Observability
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disaster-recovery-planning" class="md-nav__link">
    <span class="md-ellipsis">
      Disaster Recovery Planning
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance-tuning-and-optimisation" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Tuning and Optimisation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Performance Tuning and Optimisation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#docker-swarm-optimisation" class="md-nav__link">
    <span class="md-ellipsis">
      Docker Swarm Optimisation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-performance" class="md-nav__link">
    <span class="md-ellipsis">
      Network Performance
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#maintenance-and-updates" class="md-nav__link">
    <span class="md-ellipsis">
      Maintenance and Updates
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Maintenance and Updates">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#regular-maintenance-tasks" class="md-nav__link">
    <span class="md-ellipsis">
      Regular Maintenance Tasks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#storage-performance-optimisation" class="md-nav__link">
    <span class="md-ellipsis">
      Storage Performance Optimisation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-performance-optimisation" class="md-nav__link">
    <span class="md-ellipsis">
      Network Performance Optimisation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting-quick-reference" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting Quick Reference
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting Quick Reference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-issues-and-solutions" class="md-nav__link">
    <span class="md-ellipsis">
      Common Issues and Solutions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources-and-references" class="md-nav__link">
    <span class="md-ellipsis">
      Resources and References
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Networking
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Networking
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Tailscale
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            Tailscale
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Tailscale/Homelab%20Config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Homelab Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Security & Identity
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Security & Identity
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Windows Defender Application Control (WDAC)
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            Windows Defender Application Control (WDAC)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../WDAC/GettingStarted/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../WDAC/configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Conditional Access
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Conditional Access
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Conditional%20Acess/Authentication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Authentication
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Conditional%20Acess/Deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deployment
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Privileged Identity Management (PIM)
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Privileged Identity Management (PIM)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PIM/GettingStarted/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PIM/Groups/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Groups Management
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Development & DevOps
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Development & DevOps
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_1" >
        
          
          <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Version Control
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            Version Control
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Version%20Control/Intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Version%20Control/AZ-400/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AZ-400 Certification
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Version%20Control/AzureDataFactory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Azure Data Factory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Version%20Control/IngestionPipelines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Data Ingestion Pipelines
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Version%20Control/PowerBI/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Power BI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Version%20Control/PowerPages/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Power Pages
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Creative Writing
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Creative Writing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_1" >
        
          
          <label class="md-nav__link" for="__nav_6_1" id="__nav_6_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Game Lore
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1">
            <span class="md-nav__icon md-icon"></span>
            Game Lore
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Game/HigherPower/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Higher Power
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Game/OfElves/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Of Elves
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Game/TheGnomes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    The Gnomes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="my-home-lab-rebuilt-a-practical-battle-tested-guide">My Home Lab, Rebuilt: A Practical, Battle-Tested Guide<a class="headerlink" href="#my-home-lab-rebuilt-a-practical-battle-tested-guide" title="Permanent link">&para;</a></h1>
<p>I recently tore down and rebuilt my home lab on Docker Swarm. This post walks through the architecture, the why behind key choices, and the gritty fixes that made everything fast, reliable, and maintainable. If you’re wrangling media, smart-home gear, and photos—all while keeping stateful data safe on NAS—this is for you.</p>
<div class="admonition note">
<p class="admonition-title">What You'll Learn</p>
<p>This guide covers a production-ready home lab setup using Docker Swarm with real-world solutions for common problems like NFS storage, network discovery, and database performance issues.</p>
</div>
<h2 id="topology-at-a-glance">Topology at a Glance<a class="headerlink" href="#topology-at-a-glance" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>Cluster</strong>: Docker Swarm across metal0 … metal6 (7-node cluster for high availability)</li>
<li><strong>Orchestrator UX</strong>: <a href="https://dokploy.com/">Dokploy</a> to deploy stacks from a GitHub repo (compose-as-code approach)</li>
<li><strong>Ingress</strong>: Traefik on the overlay network <code>dokploy-network</code> routing public hostnames</li>
<li><strong>Tunnels</strong>: Cloudflare Tunnel for select services (e.g., Home Assistant front door)</li>
<li><strong>Storage Architecture</strong>:<ul>
<li><strong>Rockstor</strong> at 192.168.1.184 for persistent appdata (NFS v4.1)</li>
<li><strong>Synology <a class="magiclink magiclink-github magiclink-issue" href="https://github.com/rovxbot/NAS/issues/2" title="GitHub Issue: rovxbot/NAS #2">NAS#2</a></strong> at 192.168.1.154 (“Plex Media” share, NFS v3) for media &amp; Immich uploads</li>
<li><strong>Synology <a class="magiclink magiclink-github magiclink-issue" href="https://github.com/rovxbot/NAS/issues/1" title="GitHub Issue: rovxbot/NAS #1">NAS#1</a></strong> at 192.168.1.153 (“emby_media” share, NFS v3) for legacy media</li>
</ul>
</li>
<li><strong>Networking Strategy</strong> (split-brain by design):<ul>
<li><strong>Host networking</strong> where discovery/UPnP matters (Jellyfin, Home Assistant)</li>
<li><strong>Overlay networking</strong> for everything else, with an edge sidecar pattern to bridge to host-net apps</li>
</ul>
</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Why Docker Swarm?</p>
<p>Docker Swarm provides native clustering with built-in load balancing, service discovery, and rolling updates. Unlike Kubernetes, it's lightweight and perfect for home labs where simplicity matters more than enterprise features.</p>
</div>
<h2 id="architecture-overview">Architecture Overview<a class="headerlink" href="#architecture-overview" title="Permanent link">&para;</a></h2>
<h3 id="why-this-setup-works">Why This Setup Works<a class="headerlink" href="#why-this-setup-works" title="Permanent link">&para;</a></h3>
<p>This home lab architecture is designed around three core principles:</p>
<ol>
<li><strong>Separation of Concerns</strong>: Storage, compute, and networking are handled by specialised components</li>
<li><strong>Hybrid Networking</strong>: Use the right network mode for each application's requirements</li>
<li><strong>Data Locality</strong>: Keep performance-critical data local while sharing configuration via NFS</li>
</ol>
<h3 id="hardware-foundation">Hardware Foundation<a class="headerlink" href="#hardware-foundation" title="Permanent link">&para;</a></h3>
<p>The cluster consists of seven nodes (metal0-metal6) running Docker Swarm:
- <strong>metal0</strong>: Primary node with fastest storage (SSD) for databases
- <strong>metal1-metal6</strong>: Worker nodes with varying capabilities
- <strong>Network</strong>: Gigabit Ethernet with plans for 10GbE upgrade
- <strong>Storage</strong>: Mix of local SSDs for databases and NFS for shared data</p>
<h2 id="core-design-patterns-that-pay-off">Core Design Patterns That Pay Off<a class="headerlink" href="#core-design-patterns-that-pay-off" title="Permanent link">&para;</a></h2>
<h3 id="1-nfs-done-right-match-the-server-and-the-path">1) NFS Done Right: Match the Server and the Path<a class="headerlink" href="#1-nfs-done-right-match-the-server-and-the-path" title="Permanent link">&para;</a></h3>
<p>Network File System (NFS) is the backbone of this setup, providing shared storage across the cluster. The key insight is that different NAS systems require different NFS versions and mounting approaches.</p>
<p>I use NFS v4.1 for Rockstor appdata and NFS v3 for Synology shares. On Synology, the export includes spaces (<code>:/volume1/Plex Media</code>), so you must pass the device exactly as exported and quote correctly in Compose.</p>
<div class="admonition warning">
<p class="admonition-title">NFS Version Compatibility</p>
<p>Mixing NFS versions incorrectly will cause mount failures. Always check your NAS export settings and match the version exactly. Synology typically uses NFS v3, while modern Linux NAS solutions like Rockstor prefer v4.1.</p>
</div>
<p>Example volume definitions:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1"># Rockstor appdata (NFS v4.1)</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="nt">driver_opts</span><span class="p">:</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nfs</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">  </span><span class="nt">o</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">addr=192.168.1.184,nfsvers=4.1,rw</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">  </span><span class="nt">device</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">:/export/appdata/&lt;app&gt;/config</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="c1"># Synology shares (NFS v3)</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="nt">driver_opts</span><span class="p">:</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nfs</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="w">  </span><span class="nt">o</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">addr=192.168.1.154,nfsvers=3,rw</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="w">  </span><span class="nt">device</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;:/volume1/Plex</span><span class="nv"> </span><span class="s">Media&quot;</span>
</span></code></pre></div>
<h4 id="quick-sanity-checks-i-use">Quick Sanity Checks I Use<a class="headerlink" href="#quick-sanity-checks-i-use" title="Permanent link">&para;</a></h4>
<p>Before deploying any application that relies on NFS, always test the mount manually:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1"># Create a probe volume</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>docker<span class="w"> </span>volume<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">  </span>--driver<span class="w"> </span><span class="nb">local</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">  </span>--opt<span class="w"> </span><span class="nv">type</span><span class="o">=</span>nfs<span class="w"> </span><span class="se">\</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">  </span>--opt<span class="w"> </span><span class="nv">o</span><span class="o">=</span><span class="nv">addr</span><span class="o">=</span><span class="m">192</span>.168.1.154,nfsvers<span class="o">=</span><span class="m">3</span>,rw<span class="w"> </span><span class="se">\</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">  </span>--opt<span class="w"> </span><span class="nv">device</span><span class="o">=</span><span class="s2">&quot;:/volume1/Plex Media&quot;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">  </span>plex_media_probe
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="c1"># Write a marker to prove the mount</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>-v<span class="w"> </span>plex_media_probe:/t<span class="w"> </span>alpine<span class="w"> </span>sh<span class="w"> </span>-lc<span class="w"> </span><span class="se">\</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="w"> </span><span class="s1">&#39;mkdir -p &quot;/t/images&quot;; echo ok &gt; &quot;/t/images/.probe&quot;; ls -lah &quot;/t/images&quot;&#39;</span>
</span></code></pre></div>
<div class="admonition tip">
<p class="admonition-title">NFS Troubleshooting</p>
<p>If the probe fails, check these common issues:</p>
<ul>
<li><strong>Export path</strong>: Verify the exact path on your NAS (including spaces)</li>
<li><strong>NFS version</strong>: Match your NAS server's supported version</li>
<li><strong>Permissions</strong>: Ensure the NFS export allows your Docker host's IP</li>
<li><strong>Firewall</strong>: Check that NFS ports (2049, 111) are open</li>
</ul>
</div>
<p>If this fails, fix the export or the nfsvers before deploying the app.</p>
<div class="admonition info">
<p class="admonition-title">Edge Sidecar Pattern Benefits</p>
<p>This architectural pattern provides several advantages:</p>
<ul>
<li><strong>Network isolation</strong>: Keep most services on secure overlay networks</li>
<li><strong>Service discovery</strong>: Host networking apps can still use multicast/broadcast</li>
<li><strong>Clean routing</strong>: External access through Traefik with proper SSL termination</li>
<li><strong>Flexibility</strong>: Easy to add authentication middleware or rate limiting</li>
</ul>
</div>
<h2 id="2-edge-sidecar-to-bridge-host-net-apps-to-traefik">2) “Edge sidecar” to bridge host-net apps to Traefik<a class="headerlink" href="#2-edge-sidecar-to-bridge-host-net-apps-to-traefik" title="Permanent link">&para;</a></h2>
<p>Some apps (Home Assistant, Jellyfin) benefit from network_mode: host for multicast/discovery or DLNA. But I still want pretty hostnames via Traefik. The trick is a tiny nginx sidecar on the overlay that proxies to the app’s LAN IP:port.
- App (host net) binds to the node (e.g., metal4:8123).
- ha-edge (overlay) exposes / → proxies to 192.168.1.194:8123.
- Traefik routes assistant.cooked.beer to the sidecar.
This keeps all the “smart home” discovery local while giving me a clean public entry (via Cloudflare Tunnel or Traefik).</p>
<h3 id="3-keep-hot-lock-sensitive-dbs-local-the-jellyfin-fix">3) Keep Hot, Lock-Sensitive DBs Local (The Jellyfin Fix)<a class="headerlink" href="#3-keep-hot-lock-sensitive-dbs-local-the-jellyfin-fix" title="Permanent link">&para;</a></h3>
<p>SQLite databases and NFS don't mix well—you'll eventually encounter "database is locked" errors and poor performance. This is because SQLite relies on file locking mechanisms that don't work reliably over network filesystems.</p>
<div class="admonition warning">
<p class="admonition-title">SQLite + NFS = Problems</p>
<p>Never run SQLite databases directly on NFS shares. The file locking mechanisms SQLite relies on don't work properly over network filesystems, leading to corruption and performance issues.</p>
</div>
<h2 id="storage-architecture-deep-dive">Storage Architecture Deep Dive<a class="headerlink" href="#storage-architecture-deep-dive" title="Permanent link">&para;</a></h2>
<h3 id="understanding-nfs-in-a-home-lab-context">Understanding NFS in a Home Lab Context<a class="headerlink" href="#understanding-nfs-in-a-home-lab-context" title="Permanent link">&para;</a></h3>
<p>Network File System (NFS) is crucial for sharing configuration and data across cluster nodes, but it requires careful planning:</p>
<p><strong>NFS Version Selection:</strong>
- <strong>NFS v3</strong>: Stateless protocol, better for simple file sharing (Synology default)
- <strong>NFS v4.1</strong>: Stateful with better security and performance features (modern Linux NAS)</p>
<p><strong>Performance Considerations:</strong>
- <strong>Network bandwidth</strong>: Ensure adequate network capacity for concurrent access
- <strong>Latency sensitivity</strong>: Keep databases local, share configuration via NFS
- <strong>Caching</strong>: Enable client-side caching where appropriate</p>
<p><strong>Mount Options Explained:</strong>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1"># Common NFS mount options</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>rw<span class="w">          </span><span class="c1"># Read-write access</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>soft<span class="w">        </span><span class="c1"># Fail gracefully on timeout (use with caution)</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>hard<span class="w">        </span><span class="c1"># Retry indefinitely (safer for critical data)</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>intr<span class="w">        </span><span class="c1"># Allow interruption of NFS calls</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="nv">timeo</span><span class="o">=</span><span class="m">600</span><span class="w">   </span><span class="c1"># Timeout in deciseconds (60 seconds)</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="nv">retrans</span><span class="o">=</span><span class="m">2</span><span class="w">   </span><span class="c1"># Number of retries before giving up</span>
</span></code></pre></div></p>
<div class="admonition warning">
<p class="admonition-title">NFS Performance Impact</p>
<p>While NFS is convenient for shared configuration, it introduces network latency. For performance-critical applications like databases, always use local storage with NFS only for configuration and logs.</p>
</div>
<p>The solution is to overlay just the database path onto a local volume while keeping the rest of the configuration on NFS:
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nt">volumes</span><span class="p">:</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">jellyfin_config_v2:/config</span><span class="w">          </span><span class="c1"># NFS (settings/plugins/logs)</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">jellyfin_cache_v2:/cache</span><span class="w">            </span><span class="c1"># NFS (artwork cache)</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">jellyfin_db_local:/config/data</span><span class="w">      </span><span class="c1"># LOCAL (DB files only)</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tmpfs</span><span class="w">                         </span><span class="c1"># Transcode scratch = RAM</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">    </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/transcode</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="w">    </span><span class="nt">tmpfs</span><span class="p">:</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="w">      </span><span class="nt">size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8g</span>
</span></code></pre></div>
I also pinned Jellyfin to metal0 (which has the fastest disk) via Swarm constraint/label.</p>
<p><strong>Result</strong>: Fast library scans, no more database locks, and reliable performance.</p>
<div class="admonition tip">
<p class="admonition-title">Database Performance Strategy</p>
<p>For any application with a local database (SQLite, LevelDB, etc.):</p>
<ol>
<li><strong>Keep databases local</strong> - Use node-local storage for DB files</li>
<li><strong>Pin to specific nodes</strong> - Use Swarm constraints to ensure consistency</li>
<li><strong>Separate concerns</strong> - Keep config/cache on NFS, databases local</li>
<li><strong>Use fast storage</strong> - SSDs make a huge difference for database performance</li>
</ol>
</div>
<h2 id="the-applications">The Applications<a class="headerlink" href="#the-applications" title="Permanent link">&para;</a></h2>
<h3 id="jellyfin-media-server">Jellyfin (Media Server)<a class="headerlink" href="#jellyfin-media-server" title="Permanent link">&para;</a></h3>
<p>Jellyfin is the heart of the media setup, serving movies, TV shows, and music to devices throughout the home.</p>
<p><strong>Why host networking?</strong> DLNA/UPnP discovery protocols work best with direct network access. These protocols rely on multicast and broadcast packets that don't traverse Docker's overlay networks well.</p>
<p><strong>Storage Strategy:</strong>
- <strong>Config/Cache</strong>: Rockstor NFS v4.1 for settings, plugins, and artwork cache
- <strong>Database</strong>: Local SSD storage at <code>/var/lib/jellyfin-db</code> for performance
- <strong>Media Sources</strong>:
    - <code>:/volume1/Plex Media</code> → mounted at <code>/media/plex</code> (NFS v3)
    - <code>:/volume1/emby_media</code> → mounted at <code>/media/emby</code> (NFS v3)</p>
<p><strong>Performance Optimisations:</strong>
- <strong>Transcoding</strong>: 8GB tmpfs at <code>/transcode</code> for fast temporary file operations
- <strong>Node pinning</strong>: Constrained to metal0 (fastest storage) for consistent performance</p>
<p><strong>Access Methods:</strong>
- <strong>Internal</strong>: Direct access on <code>http://192.168.1.190:8096</code>
- <strong>External</strong>: Tailscale Funnel (e.g., <code>https://metal0.…ts.net</code>)
- <strong>No Traefik</strong>: Direct exposure avoids overlay network complexity for DLNA</p>
<div class="admonition note">
<p class="admonition-title">Why Not Traefik for Jellyfin?</p>
<p>While Traefik works great for web apps, media servers benefit from direct network access for device discovery and DLNA streaming. The edge sidecar pattern adds unnecessary complexity here.</p>
</div>
<h3 id="radarr-sonarr-prowlarr-sabnzbd-jellyseerr">Radarr, Sonarr, Prowlarr, SABnzbd, Jellyseerr<a class="headerlink" href="#radarr-sonarr-prowlarr-sabnzbd-jellyseerr" title="Permanent link">&para;</a></h3>
<ul>
<li>Pattern: Straight overlay services behind Traefik.</li>
<li>Downloads / media paths: Keep consistent with Jellyfin to avoid post-processing shenanigans.</li>
<li>NFS: Synology shares use nfsvers=3, Rockstor appdata uses 4.1.</li>
<li>Common gotcha: Mount errors like “invalid argument” or “no such file or directory” almost always mean the export path or NFS version doesn’t match reality.
Example Traefik labels:
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="nt">deploy</span><span class="p">:</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.enable=true</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.routers.radarr.rule=Host(`radarr.cooked.beer`)</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.routers.radarr.entrypoints=web</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.services.radarr.loadbalancer.server.port=7878</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.docker.network=dokploy-network</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.routers.radarr.middlewares=authelia@docker</span>
</span></code></pre></div></li>
</ul>
<div class="admonition tip">
<p class="admonition-title">*arr Stack Configuration Tips</p>
<ul>
<li><strong>Consistent paths</strong>: Use identical mount points across all *arr services and Jellyfin</li>
<li><strong>Authentication</strong>: Implement Authelia or similar for secure external access</li>
<li><strong>Resource limits</strong>: Set appropriate CPU and memory limits to prevent resource starvation</li>
<li><strong>Health checks</strong>: Configure proper health checks for reliable service management</li>
</ul>
</div>
<h3 id="vaultwarden-password-manager">Vaultwarden (Password Manager)<a class="headerlink" href="#vaultwarden-password-manager" title="Permanent link">&para;</a></h3>
<p>Vaultwarden is a lightweight, self-hosted Bitwarden server implementation that provides enterprise-grade password management for the home lab.</p>
<p><strong>Architecture</strong>: Simple overlay service behind Traefik with authentication middleware.</p>
<p><strong>Storage</strong>: Configuration persisted to Rockstor (<code>/export/appdata/vaultwarden</code>) for backup and persistence across node failures.</p>
<div class="admonition warning">
<p class="admonition-title">Security Best Practices</p>
<ul>
<li><strong>Never commit secrets</strong>: Use Dokploy's environment variables or secrets management</li>
<li><strong>Enable 2FA</strong>: Configure TOTP for admin access</li>
<li><strong>Regular backups</strong>: Password databases are critical—ensure they're included in your backup strategy</li>
<li><strong>Admin token rotation</strong>: Regularly rotate admin tokens and API keys</li>
</ul>
</div>
<h3 id="immich-self-hosted-photos">Immich (self-hosted photos)<a class="headerlink" href="#immich-self-hosted-photos" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Services: immich-server, immich-machine-learning, redis/valkey, and postgres.</p>
</li>
<li>
<p>Where “uploads” live: Synology <a class="magiclink magiclink-github magiclink-issue" href="https://github.com/rovxbot/NAS/issues/2" title="GitHub Issue: rovxbot/NAS #2">NAS#2</a> under :/volume1/Plex Media/images (NFS v3) mounted at /usr/src/app/upload.
Immich expects a structure with thumbs, library, encoded-video, backups, etc.
I verified folder health by dropping a marker file .immich inside critical dirs (especially encoded-video).</p>
</li>
<li>
<p>DB: Immich’s Postgres pinned to metal2 (label immichdb=1) with its data on the node’s local disk (/srv/appdata/immich/postgres). The Immich team warns against network shares for the DB—respect that.</p>
</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Immich Performance Optimisation</p>
<p><strong>Machine Learning Performance:</strong></p>
<ul>
<li><strong>GPU acceleration</strong>: Consider adding GPU support for faster facial recognition</li>
<li><strong>Model caching</strong>: Store ML models on fast storage for quicker startup</li>
<li><strong>Memory allocation</strong>: Ensure adequate RAM for the ML container (4GB minimum)</li>
</ul>
<p><strong>Storage Performance:</strong></p>
<ul>
<li><strong>Thumbnail generation</strong>: Use local SSD storage for thumbnail cache</li>
<li><strong>Video transcoding</strong>: Ensure adequate CPU or hardware acceleration</li>
<li><strong>Database tuning</strong>: Optimise PostgreSQL settings for photo metadata workloads</li>
</ul>
</div>
<ul>
<li>
<p>Model cache: Rockstor NFS (/export/appdata/immich/model-cache) for machine-learning models.</p>
</li>
<li>
<p>Networking gotcha: immich-server must see redis in the same network. If you see getaddrinfo ENOTFOUND redis, put them on the same overlay or set REDIS_HOST env to the service DNS.</p>
</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Immich Storage Health</p>
<p>Immich requires specific directory structures for proper operation. Always verify that required directories exist and are writable:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="c1"># Verify Immich directory structure</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>-v<span class="w"> </span>immich_uploads:/data<span class="w"> </span>alpine<span class="w"> </span>sh<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="s2">mkdir -p /data/{thumbs,library,encoded-video,backups,profile}</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="s2">touch /data/encoded-video/.immich</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="s2">ls -la /data/</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="s2">&quot;</span>
</span></code></pre></div>
</div>
<p>If you see:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c1">### Home Assistant Deep Dive</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>Home<span class="w"> </span>Assistant<span class="w"> </span>is<span class="w"> </span>the<span class="w"> </span>central<span class="w"> </span>hub<span class="w"> </span><span class="k">for</span><span class="w"> </span>smart<span class="w"> </span>home<span class="w"> </span>automation,<span class="w"> </span>requiring<span class="w"> </span>careful<span class="w"> </span>network<span class="w"> </span>configuration<span class="w"> </span>to<span class="w"> </span>work<span class="w"> </span>properly<span class="w"> </span>with<span class="w"> </span>IoT<span class="w"> </span>devices.
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>**Why<span class="w"> </span>Host<span class="w"> </span>Networking<span class="w"> </span>is<span class="w"> </span>Essential:**
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>-<span class="w"> </span>**mDNS<span class="w"> </span>Discovery**:<span class="w"> </span>Many<span class="w"> </span>smart<span class="w"> </span>devices<span class="w"> </span>use<span class="w"> </span>multicast<span class="w"> </span>DNS<span class="w"> </span><span class="k">for</span><span class="w"> </span>discovery
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>-<span class="w"> </span>**SSDP<span class="w"> </span>Protocol**:<span class="w"> </span>UPnP<span class="w"> </span>devices<span class="w"> </span>rely<span class="w"> </span>on<span class="w"> </span>Simple<span class="w"> </span>Service<span class="w"> </span>Discovery<span class="w"> </span>Protocol
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>-<span class="w"> </span>**Direct<span class="w"> </span>Device<span class="w"> </span>Communication**:<span class="w"> </span>Some<span class="w"> </span>integrations<span class="w"> </span>require<span class="w"> </span>direct<span class="w"> </span>IP<span class="w"> </span>communication
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>-<span class="w"> </span>**Performance**:<span class="w"> </span>Eliminates<span class="w"> </span>network<span class="w"> </span>translation<span class="w"> </span>overhead<span class="w"> </span><span class="k">for</span><span class="w"> </span>real-time<span class="w"> </span>automation
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>**Network<span class="w"> </span>Requirements:**
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a><span class="sb">```</span>bash
</span><span id="__span-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="c1"># Essential ports for Home Assistant</span>
</span><span id="__span-6-14"><a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a>Port<span class="w"> </span><span class="m">8123</span>/tcp<span class="w">  </span><span class="c1"># Web interface</span>
</span><span id="__span-6-15"><a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a>Port<span class="w"> </span><span class="m">5353</span>/udp<span class="w">  </span><span class="c1"># mDNS (multicast DNS)</span>
</span><span id="__span-6-16"><a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a>Port<span class="w"> </span><span class="m">1900</span>/udp<span class="w">  </span><span class="c1"># SSDP (UPnP discovery)</span>
</span><span id="__span-6-17"><a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a>Port<span class="w"> </span><span class="m">21063</span>/tcp<span class="w"> </span><span class="c1"># HomeKit (if enabled)</span>
</span></code></pre></div></p>
<p><strong>Integration Examples:</strong>
- <strong>Philips Hue</strong>: Requires mDNS for bridge discovery
- <strong>Sonos</strong>: Uses SSDP for speaker discovery
- <strong>Chromecast</strong>: Relies on multicast for device detection
- <strong>MQTT</strong>: Direct TCP communication with IoT devices
Failed to read (/data/encoded-video/.immich): ENOENT ...
<div class="language-text highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>create the directory and a .immich marker so Immich&#39;s health checks pass.
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>### Home Assistant
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>Goal: Discovery on the LAN and a pretty hostname with Cloudflare/Traefik.
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>- HA runs host-net on metal4, binding to 8123 locally for SSDP/mDNS.
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>- Edge sidecar (ha-edge) is an nginx container on the overlay that proxies to 192.168.1.194:8123.
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>- Traefik routes assistant.cooked.beer → ha-edge.
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>- Firewall (UFW on the node):
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>    - 8123/tcp from LAN, 5353/udp (mDNS), 1900/udp (SSDP).
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>Minimal, robust HA config (/config/configuration.yaml):
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>```yaml
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a>homeassistant:
</span><span id="__span-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a>  name: Cooked Home
</span><span id="__span-7-15"><a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a>  time_zone: Australia/Adelaide
</span><span id="__span-7-16"><a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a>  unit_system: metric
</span><span id="__span-7-17"><a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a>  currency: AUD
</span><span id="__span-7-18"><a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a>
</span><span id="__span-7-19"><a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a># Essential services/UI
</span><span id="__span-7-20"><a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a>default_config:
</span><span id="__span-7-21"><a id="__codelineno-7-21" name="__codelineno-7-21" href="#__codelineno-7-21"></a>
</span><span id="__span-7-22"><a id="__codelineno-7-22" name="__codelineno-7-22" href="#__codelineno-7-22"></a># Reverse proxy hygiene
</span><span id="__span-7-23"><a id="__codelineno-7-23" name="__codelineno-7-23" href="#__codelineno-7-23"></a>http:
</span><span id="__span-7-24"><a id="__codelineno-7-24" name="__codelineno-7-24" href="#__codelineno-7-24"></a>  use_x_forwarded_for: true
</span><span id="__span-7-25"><a id="__codelineno-7-25" name="__codelineno-7-25" href="#__codelineno-7-25"></a>  trusted_proxies:
</span><span id="__span-7-26"><a id="__codelineno-7-26" name="__codelineno-7-26" href="#__codelineno-7-26"></a>    - 127.0.0.1
</span><span id="__span-7-27"><a id="__codelineno-7-27" name="__codelineno-7-27" href="#__codelineno-7-27"></a>    - 192.168.1.0/24
</span><span id="__span-7-28"><a id="__codelineno-7-28" name="__codelineno-7-28" href="#__codelineno-7-28"></a>    - 10.0.0.0/8
</span><span id="__span-7-29"><a id="__codelineno-7-29" name="__codelineno-7-29" href="#__codelineno-7-29"></a>    - 172.16.0.0/12
</span></code></pre></div></p>
<div class="admonition warning">
<p class="admonition-title">Home Assistant Configuration Gotchas</p>
<ul>
<li><code>external_url</code> / <code>internal_url</code> are optional; only use them if you have specific requirements</li>
<li>Misplacing them or adding unsupported <code>http:</code> keys will break the UI completely</li>
<li>Always test configuration changes in a development environment first</li>
</ul>
</div>
<p>The working sidecar (key bits):
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="nt">ha-edge</span><span class="p">:</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="w">  </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx:alpine</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="w">  </span><span class="nt">networks</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">dokploy-network</span><span class="p p-Indicator">]</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="w">  </span><span class="nt">environment</span><span class="p">:</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HA_UPSTREAM=192.168.1.194:8123</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="w">  </span><span class="nt">volumes</span><span class="p">:</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ha-nginx-template:/etc/nginx/templates:ro</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="w">  </span><span class="nt">deploy</span><span class="p">:</span>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="w">    </span><span class="nt">labels</span><span class="p">:</span>
</span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.enable=true</span>
</span><span id="__span-8-11"><a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.docker.network=dokploy-network</span>
</span><span id="__span-8-12"><a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.routers.ha.rule=Host(`assistant.cooked.beer`)</span>
</span><span id="__span-8-13"><a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.routers.ha.entrypoints=web</span>
</span><span id="__span-8-14"><a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.services.ha.loadbalancer.server.port=8080</span>
</span></code></pre></div>
I generate the nginx config from a tiny init container so the environment variable substitution is bullet-proof (no shell quoting surprises).</p>
<div class="admonition tip">
<p class="admonition-title">Nginx Template Pattern</p>
<p>Using nginx templates with environment variable substitution is more reliable than shell-based config generation. The nginx:alpine image supports this natively via the <code>/etc/nginx/templates</code> directory.</p>
</div>
<h3 id="backups-with-duplicacy-cli-swarm-cron">Backups with Duplicacy CLI + Swarm Cron<a class="headerlink" href="#backups-with-duplicacy-cli-swarm-cron" title="Permanent link">&para;</a></h3>
<p>I didn’t want to pay for Duplicacy Web, so I wired Duplicacy CLI to run on a schedule using swarm-cronjob.
- Target: Backblaze B2 bucket (S3-compatible endpoint).</p>
<div class="admonition note">
<p class="admonition-title">Backup Strategy Deep Dive</p>
<p><strong>Why Duplicacy?</strong></p>
<ul>
<li><strong>Deduplication</strong>: Saves significant storage space with incremental backups</li>
<li><strong>Encryption</strong>: Client-side encryption ensures data privacy</li>
<li><strong>Multiple backends</strong>: Supports various cloud storage providers</li>
<li><strong>Reliability</strong>: Lock-free design prevents corruption from interrupted backups</li>
</ul>
<p><strong>Alternative backup solutions to consider:</strong></p>
<ul>
<li><strong>Restic</strong>: Similar features with different CLI interface</li>
<li><strong>Borg</strong>: Excellent for local backups with deduplication</li>
<li><strong>Rclone</strong>: Great for simple sync operations to cloud storage</li>
</ul>
</div>
<ul>
<li>Repo: The Immich uploads volume (read-only).</li>
<li>Schedule: Every 3 days at midnight.</li>
<li>Retention: Keep the latest 2 snapshots.</li>
<li>State: Duplicacy .duplicacy preferences live on Rockstor so jobs can run stateless anywhere.
Key idea: A one-time init service (scaled to 0) and two cron-driven services (backup &amp; prune). The cron magic is all labels; no external scheduler needed.</li>
</ul>
<p>Example backup label:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>-<span class="w"> </span>swarm.cronjob.command<span class="o">=</span>duplicacy<span class="w"> </span>-log<span class="w"> </span>-pref-dir<span class="w"> </span>/config/.duplicacy<span class="w"> </span>-repository<span class="w"> </span>/data<span class="w"> </span>backup<span class="w"> </span>-stats<span class="w"> </span>-threads<span class="w"> </span><span class="m">4</span>
</span></code></pre></div>
Prune:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>-<span class="w"> </span>swarm.cronjob.command<span class="o">=</span>duplicacy<span class="w"> </span>-log<span class="w"> </span>-pref-dir<span class="w"> </span>/config/.duplicacy<span class="w"> </span>-repository<span class="w"> </span>/data<span class="w"> </span>prune<span class="w"> </span>-a<span class="w"> </span>-keep<span class="w"> </span><span class="m">0</span>:2
</span></code></pre></div>
B2 env (store as secrets, not plaintext):
<div class="language-ini highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="na">B2_ACCOUNT_ID</span><span class="o">=</span><span class="s">...</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="na">B2_ACCOUNT_KEY</span><span class="o">=</span><span class="s">...</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="na">DUPLICACY_PASSWORD</span><span class="o">=</span><span class="s">...</span><span class="w">                </span><span class="c1"># if you choose to encrypt</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="na">B2_BUCKET</span><span class="o">=</span><span class="s">cooked-photos</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="na">B2_PREFIX</span><span class="o">=</span><span class="s">immich</span>
</span></code></pre></div></p>
<h3 id="network-security-deep-dive">Network Security Deep Dive<a class="headerlink" href="#network-security-deep-dive" title="Permanent link">&para;</a></h3>
<p><strong>UFW Configuration Example:</strong>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="c1"># Basic UFW setup on each node</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>sudo<span class="w"> </span>ufw<span class="w"> </span>default<span class="w"> </span>deny<span class="w"> </span>incoming
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>sudo<span class="w"> </span>ufw<span class="w"> </span>default<span class="w"> </span>allow<span class="w"> </span>outgoing
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="c1"># SSH access (change port as needed)</span>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>sudo<span class="w"> </span>ufw<span class="w"> </span>allow<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.0/24<span class="w"> </span>to<span class="w"> </span>any<span class="w"> </span>port<span class="w"> </span><span class="m">22</span>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="c1"># Docker Swarm cluster communication</span>
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>sudo<span class="w"> </span>ufw<span class="w"> </span>allow<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.190/32<span class="w"> </span>to<span class="w"> </span>any<span class="w"> </span>port<span class="w"> </span><span class="m">2377</span><span class="w">  </span><span class="c1"># Manager</span>
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>sudo<span class="w"> </span>ufw<span class="w"> </span>allow<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.0/24<span class="w"> </span>to<span class="w"> </span>any<span class="w"> </span>port<span class="w"> </span><span class="m">7946</span><span class="w">   </span><span class="c1"># Node communication</span>
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>sudo<span class="w"> </span>ufw<span class="w"> </span>allow<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.0/24<span class="w"> </span>to<span class="w"> </span>any<span class="w"> </span>port<span class="w"> </span><span class="m">4789</span><span class="w">   </span><span class="c1"># Overlay network</span>
</span><span id="__span-12-12"><a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a>
</span><span id="__span-12-13"><a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a><span class="c1"># Home Assistant specific</span>
</span><span id="__span-12-14"><a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a>sudo<span class="w"> </span>ufw<span class="w"> </span>allow<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.0/24<span class="w"> </span>to<span class="w"> </span>any<span class="w"> </span>port<span class="w"> </span><span class="m">8123</span><span class="w">   </span><span class="c1"># Web interface</span>
</span><span id="__span-12-15"><a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a>sudo<span class="w"> </span>ufw<span class="w"> </span>allow<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.0/24<span class="w"> </span>to<span class="w"> </span>any<span class="w"> </span>port<span class="w"> </span><span class="m">5353</span><span class="w">   </span><span class="c1"># mDNS</span>
</span><span id="__span-12-16"><a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a>sudo<span class="w"> </span>ufw<span class="w"> </span>allow<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.0/24<span class="w"> </span>to<span class="w"> </span>any<span class="w"> </span>port<span class="w"> </span><span class="m">1900</span><span class="w">   </span><span class="c1"># SSDP</span>
</span><span id="__span-12-17"><a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a>
</span><span id="__span-12-18"><a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a>sudo<span class="w"> </span>ufw<span class="w"> </span><span class="nb">enable</span>
</span></code></pre></div></p>
<div class="admonition danger">
<p class="admonition-title">Firewall Safety</p>
<p>Always test firewall rules carefully. Consider keeping a console session open when applying new rules in case you lock yourself out via SSH.</p>
</div>
<h3 id="authentication-strategy">Authentication Strategy<a class="headerlink" href="#authentication-strategy" title="Permanent link">&para;</a></h3>
<p><strong>Authelia Integration</strong>: For services that don't have built-in authentication, Authelia provides:
- Single sign-on across all services
- Two-factor authentication support
- Fine-grained access control
- Integration with external identity providers</p>
<p><strong>Example Authelia middleware configuration:</strong>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="c1"># In your Traefik-enabled service</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="nt">deploy</span><span class="p">:</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.routers.service.middlewares=authelia@docker</span>
</span></code></pre></div></p>
<h2 id="dokploy-swarm-the-workflow">Dokploy + Swarm: The Workflow<a class="headerlink" href="#dokploy-swarm-the-workflow" title="Permanent link">&para;</a></h2>
<p>Dokploy provides a GitOps-style deployment workflow for Docker Swarm, though it's still in beta and has room for improvement. Despite its current limitations, the core workflow is solid and production-ready.</p>
<div class="admonition info">
<p class="admonition-title">Dokploy Beta Status</p>
<p>Dokploy is currently in beta, so expect some rough edges. However, the core GitOps workflow is stable enough for production home lab use. The development team is actively improving the platform.</p>
</div>
<p><strong>Deployment Process:</strong>
- <strong>GitOps-ish approach</strong>: Each application has a <code>compose.yaml</code> in a Git repository
- <strong>Automated deployment</strong>: Dokploy pulls changes and runs <code>docker stack deploy</code>
- <strong>Service naming</strong>: Stacks appear as <code>apps-&lt;name&gt;-&lt;suffix&gt;_&lt;service&gt;</code> in Docker</p>
<p><strong>Essential Debugging Commands:</strong>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="c1"># Check service status and placement</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>docker<span class="w"> </span>service<span class="w"> </span>ps<span class="w"> </span>&lt;service&gt;<span class="w"> </span>--no-trunc
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="c1"># View service logs</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>docker<span class="w"> </span>service<span class="w"> </span>logs<span class="w"> </span>&lt;service&gt;
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="c1"># Inspect service configuration</span>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a>docker<span class="w"> </span>service<span class="w"> </span>inspect<span class="w"> </span>&lt;service&gt;<span class="w"> </span>--format<span class="w"> </span><span class="s1">&#39;{{.Spec.TaskTemplate.ContainerSpec.Mounts}}&#39;</span>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a>
</span><span id="__span-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="c1"># Test volume mounts</span>
</span><span id="__span-14-11"><a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a>docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>-v<span class="w"> </span>&lt;volume&gt;:/t<span class="w"> </span>alpine<span class="w"> </span>ls<span class="w"> </span>-lah<span class="w"> </span>/t
</span><span id="__span-14-12"><a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a>
</span><span id="__span-14-13"><a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a><span class="c1"># Get detailed error information</span>
</span><span id="__span-14-14"><a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a>docker<span class="w"> </span>service<span class="w"> </span>ps<span class="w"> </span>&lt;service&gt;<span class="w"> </span>--no-trunc<span class="w"> </span>--format<span class="w"> </span><span class="s2">&quot;table {{.ID}}\t{{.Name}}\t{{.Image}}\t{{.Node}}\t{{.DesiredState}}\t{{.CurrentState}}\t{{.Error}}&quot;</span>
</span></code></pre></div></p>
<div class="admonition tip">
<p class="admonition-title">Debugging Pro Tips</p>
<ul>
<li>Always use <code>--no-trunc</code> on error messages—they contain the exact details about what went wrong</li>
<li>Test volume mounts independently before deploying full stacks</li>
<li>Check service placement with <code>docker service ps</code> to ensure proper node constraints</li>
</ul>
</div>
<h2 id="security-and-hygiene">Security and Hygiene<a class="headerlink" href="#security-and-hygiene" title="Permanent link">&para;</a></h2>
<ul>
<li>Firewall on nodes: Open only what you need (HA’s 8123, mDNS/SSDP from LAN).</li>
<li>Secrets: Keep admin tokens, DB creds, and B2 keys out of git. Dokploy env/secrets work well.</li>
<li>TLS strategy: Internal HTTP is fine for LAN; external paths go through Traefik + Tunnel with TLS terminated at the edge.</li>
</ul>
<h2 id="lessons-learned-so-you-dont-have-to">Lessons Learned (so you don’t have to)<a class="headerlink" href="#lessons-learned-so-you-dont-have-to" title="Permanent link">&para;</a></h2>
<ol>
<li>NFS versions matter. Synology’s NFS v3 exports behave differently from NFS v4/v4.1. Match the server.</li>
<li>Spaces in export paths are real paths. Quote the device string exactly as exported.</li>
<li>SQLite over NFS is fragile. Put the hot .db files on local ext4 and leave the bulk on NFS.</li>
<li>Discovery wants host-net. Don’t fight Home Assistant or DLNA. Bridge to Traefik with a sidecar instead.</li>
<li>Cron in Swarm is easy. swarm-cronjob + containerized CLIs (Duplicacy) is clean and portable.</li>
<li>Read errors literally. Most “mount failed” messages tell you the problem (wrong vers, wrong device, or permission).</li>
</ol>
<h2 id="advanced-topics-and-future-improvements">Advanced Topics and Future Improvements<a class="headerlink" href="#advanced-topics-and-future-improvements" title="Permanent link">&para;</a></h2>
<h3 id="monitoring-and-observability">Monitoring and Observability<a class="headerlink" href="#monitoring-and-observability" title="Permanent link">&para;</a></h3>
<p>While not covered in detail here, a production home lab benefits from proper monitoring:</p>
<div class="admonition tip">
<p class="admonition-title">Monitoring Stack Recommendations</p>
<ul>
<li><strong>Prometheus + Grafana</strong>: For metrics collection and visualisation</li>
<li><strong>Loki</strong>: For centralised log aggregation</li>
<li><strong>Uptime Kuma</strong>: For simple service availability monitoring</li>
<li><strong>Node Exporter</strong>: For hardware metrics from each cluster node</li>
</ul>
</div>
<h3 id="disaster-recovery-planning">Disaster Recovery Planning<a class="headerlink" href="#disaster-recovery-planning" title="Permanent link">&para;</a></h3>
<p><strong>Backup Strategy Expansion:</strong>
- <strong>Configuration backups</strong>: Regular exports of Dokploy configurations
- <strong>Database dumps</strong>: Automated PostgreSQL and other database backups
- <strong>Infrastructure as Code</strong>: Document all manual configurations for reproducibility</p>
<h2 id="performance-tuning-and-optimisation">Performance Tuning and Optimisation<a class="headerlink" href="#performance-tuning-and-optimisation" title="Permanent link">&para;</a></h2>
<h3 id="docker-swarm-optimisation">Docker Swarm Optimisation<a class="headerlink" href="#docker-swarm-optimisation" title="Permanent link">&para;</a></h3>
<p><strong>Node Resource Management:</strong>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="c1"># Check node resource usage</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>docker<span class="w"> </span>node<span class="w"> </span>ls
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>docker<span class="w"> </span>system<span class="w"> </span>df
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>docker<span class="w"> </span>system<span class="w"> </span>events
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="c1"># Monitor service resource consumption</span>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>docker<span class="w"> </span>stats<span class="w"> </span><span class="k">$(</span>docker<span class="w"> </span>ps<span class="w"> </span>--format<span class="w"> </span><span class="s2">&quot;table {{.Names}}&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-v<span class="w"> </span>NAMES<span class="k">)</span>
</span></code></pre></div></p>
<p><strong>Service Placement Strategies:</strong>
- <strong>Database services</strong>: Pin to nodes with fastest storage (SSDs)
- <strong>CPU-intensive services</strong>: Distribute across nodes with adequate CPU
- <strong>Memory-heavy services</strong>: Consider memory constraints when placing services</p>
<h3 id="network-performance">Network Performance<a class="headerlink" href="#network-performance" title="Permanent link">&para;</a></h3>
<p><strong>Overlay Network Tuning:</strong>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="c1"># Check overlay network health</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>docker<span class="w"> </span>network<span class="w"> </span>ls
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>docker<span class="w"> </span>network<span class="w"> </span>inspect<span class="w"> </span>dokploy-network
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="c1"># Monitor network traffic</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>sudo<span class="w"> </span>iftop<span class="w"> </span>-i<span class="w"> </span>docker_gwbridge
</span></code></pre></div></p>
<p><strong>Bandwidth Considerations:</strong>
- <strong>Media streaming</strong>: Ensure adequate bandwidth for multiple concurrent streams
- <strong>Backup operations</strong>: Schedule during off-peak hours to avoid congestion
- <strong>NFS traffic</strong>: Monitor NFS performance during peak usage</p>
<div class="admonition tip">
<p class="admonition-title">Performance Monitoring</p>
<p>Implement monitoring early to identify bottlenecks before they impact user experience. Tools like Prometheus, Grafana, and Node Exporter provide excellent visibility into system performance.</p>
</div>
<h2 id="maintenance-and-updates">Maintenance and Updates<a class="headerlink" href="#maintenance-and-updates" title="Permanent link">&para;</a></h2>
<h3 id="regular-maintenance-tasks">Regular Maintenance Tasks<a class="headerlink" href="#regular-maintenance-tasks" title="Permanent link">&para;</a></h3>
<p><strong>Weekly:</strong>
- Check service health and logs
- Verify backup completion
- Monitor storage usage</p>
<p><strong>Monthly:</strong>
- Update container images
- Review security logs
- Test disaster recovery procedures</p>
<p><strong>Quarterly:</strong>
- Update host operating systems
- Review and rotate secrets
- Capacity planning assessment</p>
<div class="admonition note">
<p class="admonition-title">Update Strategy</p>
<p>Always test updates in a development environment first. Use Docker Swarm's rolling update capabilities to minimise downtime during production updates.</p>
</div>
<h3 id="storage-performance-optimisation">Storage Performance Optimisation<a class="headerlink" href="#storage-performance-optimisation" title="Permanent link">&para;</a></h3>
<p><strong>Tiered Storage Strategy:</strong>
- <strong>Tier 1 (SSD)</strong>: Databases, application caches, frequently accessed data
- <strong>Tier 2 (NFS/HDD)</strong>: Configuration files, logs, infrequently accessed media
- <strong>Tier 3 (Cloud)</strong>: Backups, archival data</p>
<p><strong>NFS Performance Tuning:</strong>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="c1"># Optimal NFS mount options for performance</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>mount<span class="w"> </span>-t<span class="w"> </span>nfs<span class="w"> </span>-o<span class="w"> </span><span class="nv">rsize</span><span class="o">=</span><span class="m">1048576</span>,wsize<span class="o">=</span><span class="m">1048576</span>,hard,intr,timeo<span class="o">=</span><span class="m">600</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="w">  </span><span class="m">192</span>.168.1.184:/export/appdata<span class="w"> </span>/mnt/appdata
</span></code></pre></div></p>
<h3 id="network-performance-optimisation">Network Performance Optimisation<a class="headerlink" href="#network-performance-optimisation" title="Permanent link">&para;</a></h3>
<p><strong>Bandwidth Planning:</strong>
- <strong>4K streaming</strong>: 25-50 Mbps per stream
- <strong>Photo uploads</strong>: Burst bandwidth for mobile device sync
- <strong>Backup operations</strong>: Schedule during off-peak hours</p>
<p><strong>Quality of Service (QoS):</strong>
- Prioritise real-time traffic (Home Assistant, media streaming)
- Limit backup bandwidth during peak hours
- Monitor network utilisation patterns</p>
<div class="admonition note">
<p class="admonition-title">Scaling Considerations</p>
<p>As your home lab grows, consider:</p>
<ul>
<li><strong>Resource allocation</strong>: Monitor CPU and memory usage across nodes</li>
<li><strong>Storage growth</strong>: Plan for data growth, especially with photo/video services</li>
<li><strong>Network bandwidth</strong>: Ensure adequate bandwidth for backup and sync operations</li>
<li><strong>Power consumption</strong>: Balance performance with energy efficiency</li>
</ul>
</div>
<h2 id="conclusion">Conclusion<a class="headerlink" href="#conclusion" title="Permanent link">&para;</a></h2>
<p>This home lab setup provides a robust foundation for self-hosted services while maintaining simplicity and reliability. The key principles—proper storage separation, network pattern consistency, and security hygiene—apply regardless of your specific hardware or service choices.</p>
<p>The combination of Docker Swarm's simplicity with Dokploy's GitOps workflow creates a maintainable platform that can evolve with your needs. While there are rough edges (especially with Dokploy being in beta), the core architecture is solid and production-ready for home use.</p>
<p><strong>Next Steps:</strong>
- Implement comprehensive monitoring
- Expand backup coverage to all critical services
- Document disaster recovery procedures
- Consider adding development/staging environments for testing changes</p>
<h2 id="troubleshooting-quick-reference">Troubleshooting Quick Reference<a class="headerlink" href="#troubleshooting-quick-reference" title="Permanent link">&para;</a></h2>
<h3 id="common-issues-and-solutions">Common Issues and Solutions<a class="headerlink" href="#common-issues-and-solutions" title="Permanent link">&para;</a></h3>
<p><strong>NFS Mount Failures:</strong>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="c1"># Test NFS connectivity</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>showmount<span class="w"> </span>-e<span class="w"> </span><span class="m">192</span>.168.1.154
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="c1"># Manual mount test</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>sudo<span class="w"> </span>mount<span class="w"> </span>-t<span class="w"> </span>nfs<span class="w"> </span>-o<span class="w"> </span><span class="nv">nfsvers</span><span class="o">=</span><span class="m">3</span><span class="w"> </span><span class="m">192</span>.168.1.154:/volume1/Plex<span class="se">\ </span>Media<span class="w"> </span>/mnt/test
</span></code></pre></div></p>
<p><strong>Docker Swarm Service Issues:</strong>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="c1"># Check service status across all nodes</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>docker<span class="w"> </span>service<span class="w"> </span>ps<span class="w"> </span>--no-trunc<span class="w"> </span>&lt;service_name&gt;
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="c1"># View service configuration</span>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>docker<span class="w"> </span>service<span class="w"> </span>inspect<span class="w"> </span>&lt;service_name&gt;
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a><span class="c1"># Check node availability</span>
</span><span id="__span-19-8"><a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a>docker<span class="w"> </span>node<span class="w"> </span>ls
</span></code></pre></div></p>
<p><strong>Traefik Routing Problems:</strong>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="c1"># Check Traefik dashboard</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Host: traefik.cooked.beer&quot;</span><span class="w"> </span>http://localhost:8080/dashboard/
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="c1"># Verify service discovery</span>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>docker<span class="w"> </span>service<span class="w"> </span>ls<span class="w"> </span>--filter<span class="w"> </span><span class="nv">label</span><span class="o">=</span>traefik.enable<span class="o">=</span><span class="nb">true</span>
</span></code></pre></div></p>
<div class="admonition info">
<p class="admonition-title">Getting Help</p>
<p>When asking for help in forums or Discord:</p>
<ul>
<li>Include the exact error message (use <code>--no-trunc</code>)</li>
<li>Share your Docker Compose configuration (sanitised)</li>
<li>Mention your NFS server type and version</li>
<li>Include relevant log snippets from <code>docker service logs</code></li>
</ul>
</div>
<h2 id="resources-and-references">Resources and References<a class="headerlink" href="#resources-and-references" title="Permanent link">&para;</a></h2>
<ul>
<li><strong><a href="https://dokploy.com/docs">Dokploy Documentation</a></strong>: Official documentation for the deployment platform</li>
<li><strong><a href="https://docs.docker.com/engine/swarm/">Docker Swarm Documentation</a></strong>: Comprehensive guide to Docker Swarm</li>
<li><strong><a href="https://doc.traefik.io/traefik/">Traefik Documentation</a></strong>: Reverse proxy and load balancer configuration</li>
<li><strong><a href="https://duplicacy.com/guide/">Duplicacy Documentation</a></strong>: Backup software configuration and best practices</li>
<li><strong><a href="https://www.home-assistant.io/docs/">Home Assistant Documentation</a></strong>: Smart home automation platform</li>
</ul>
<div class="admonition success">
<p class="admonition-title">Final Thoughts</p>
<p>Building a reliable home lab is an iterative process. Start simple, document everything, and gradually add complexity as you understand each component. The patterns described here have been battle-tested in a production home environment and should serve as a solid foundation for your own setup.</p>
<p><strong>Key Success Factors:</strong></p>
<ul>
<li><strong>Start small</strong>: Begin with essential services and expand gradually</li>
<li><strong>Document everything</strong>: Your future self will thank you for detailed notes</li>
<li><strong>Test thoroughly</strong>: Always verify changes in a safe environment first</li>
<li><strong>Monitor actively</strong>: Implement observability from day one</li>
<li><strong>Plan for failure</strong>: Design with redundancy and recovery in mind</li>
</ul>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 Rov
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/rovxbot" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.last.fm/user/rovbot" target="_blank" rel="noopener" title="www.last.fm" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="m225.8 367.1-18.8-51s-30.5 34-76.2 34c-40.5 0-69.2-35.2-69.2-91.5 0-72.1 36.4-97.9 72.1-97.9 66.5 0 74.8 53.3 100.9 134.9 18.8 56.9 54 102.6 155.4 102.6 72.7 0 122-22.3 122-80.9 0-72.9-62.7-80.6-115-92.1-25.8-5.9-33.4-16.4-33.4-34 0-19.9 15.8-31.7 41.6-31.7 28.2 0 43.4 10.6 45.7 35.8l58.6-7c-4.7-52.8-41.1-74.5-100.9-74.5-52.8 0-104.4 19.9-104.4 83.9 0 39.9 19.4 65.1 68 76.8 44.9 10.6 79.8 13.8 79.8 45.7 0 21.7-21.1 30.5-61 30.5-59.2 0-83.9-31.1-97.9-73.9-32-96.8-43.6-163-161.3-163C45.7 113.8 0 168.3 0 261c0 89.1 45.7 137.2 127.9 137.2 66.2 0 97.9-31.1 97.9-31.1"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://steamcommunity.com/id/rovbot/" target="_blank" rel="noopener" title="steamcommunity.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M496 256c0 137-111.2 248-248.4 248-113.8 0-209.6-76.3-239-180.4l95.2 39.3c6.4 32.1 34.9 56.4 68.9 56.4 39.2 0 71.9-32.4 70.2-73.5l84.5-60.2c52.1 1.3 95.8-40.9 95.8-93.5 0-51.6-42-93.5-93.7-93.5s-93.7 42-93.7 93.5v1.2L176.6 279c-15.5-.9-30.7 3.4-43.5 12.1L0 236.1C10.2 108.4 117.1 8 247.6 8 384.8 8 496 119 496 256M155.7 384.3l-30.5-12.6a52.8 52.8 0 0 0 27.2 25.8c26.9 11.2 57.8-1.6 69-28.4 5.4-13 5.5-27.3.1-40.3S206 305.6 193 300.2c-12.9-5.4-26.7-5.2-38.9-.6l31.5 13c19.8 8.2 29.2 30.9 20.9 50.7-8.3 19.9-31 29.2-50.8 21m173.8-129.9c-34.4 0-62.4-28-62.4-62.3s28-62.3 62.4-62.3 62.4 28 62.4 62.3-27.9 62.3-62.4 62.3m.1-15.6c25.9 0 46.9-21 46.9-46.8 0-25.9-21-46.8-46.9-46.8s-46.9 21-46.9 46.8c.1 25.8 21.1 46.8 46.9 46.8"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://discord.com/users/253028999666728960" target="_blank" rel="noopener" title="discord.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485 485 0 0 0 404.081 32.03a1.82 1.82 0 0 0-1.923.91 338 338 0 0 0-14.9 30.6 447.9 447.9 0 0 0-134.426 0 310 310 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.7 483.7 0 0 0-119.688 37.107 1.7 1.7 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.02 2.02 0 0 0 .765 1.375 487.7 487.7 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348 348 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321 321 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251 251 0 0 0 9.109-7.137 1.82 1.82 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.81 1.81 0 0 1 1.924.233 235 235 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.4 301.4 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391 391 0 0 0 30.014 48.815 1.86 1.86 0 0 0 2.063.7A486 486 0 0 0 610.7 405.729a1.88 1.88 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541M222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241m195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.expand", "navigation.path", "navigation.top", "toc.integrate", "search.suggest", "search.highlight", "search.share", "content.code.copy", "content.code.annotate"], "search": "../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>